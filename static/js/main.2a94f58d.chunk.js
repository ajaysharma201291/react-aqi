(this["webpackJsonpreact-aqi"]=this["webpackJsonpreact-aqi"]||[]).push([[0],{182:function(e,t,a){},183:function(e,t,a){"use strict";a.r(t);var c=a(3),i=a.n(c),n=a(66),s=a.n(n),l=(a(75),a(6)),r=a(1),o=a(2),d=a(11),h=a(5),j=a(4),u=a(30),b=a(67),m=a.n(b),y=a(29),x=a(70),O=a(0),p=function(e){var t=Object(c.useState)({}),a=Object(y.a)(t,2),i=a[0],n=a[1];return Object(c.useEffect)((function(){e.selectedCityData.map((function(e){e.aqi=parseInt(e.aqi.toFixed(0),10)}));var t={labels:e.selectedCityData.map((function(e){return new Date(e.updated).toLocaleString()})),datasets:[{data:e.selectedCityData.map((function(e){return e.aqi})),label:"AQI",borderColor:"#3e95cd",fill:!1}]};n(t)}),[e]),Object(O.jsxs)("div",{children:[Object(O.jsxs)("button",{onClick:e.clearCityData,className:"btn",children:["Clear Selected City : ",e.selectedCity]}),Object(O.jsx)("div",{style:{fontSize:"2em"},children:"Latest 10 Record(s)"}),Object(O.jsx)("div",{style:{height:"400px",width:"90vw",margin:"0 auto"},children:Object(O.jsx)(x.a,{data:i})})]})},C=function(e){var t=function(e){var t="unknown",a="unknown";""===e?(a="Unknown(No Results Found)",t="Unknown"):e>=0&&e<=50?(a="Good",t="good"):e>50&&e<=100?(a="Moderate",t="moderate"):e>100&&e<=150?(a="Unhealthy for Sensitive Groups",t="unhealthy-sentitive"):e>150&&e<=200?(a="Unhealthy",t="unhealthy"):e>200&&e<=300?(a="Very Unhealthy",t="very-unhealthy"):e>300&&(a="Hazardous",t="hazardous");var c={};return c.impact=a,c.className=t,c};return Object(O.jsxs)(i.a.Fragment,{children:[Object(O.jsx)("div",{style:{fontSize:"2em"},children:"Click on any city to get that city latest 10 Record(s) on chart"}),Object(O.jsxs)("table",{children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{className:"city",children:"City"}),Object(O.jsx)("th",{className:"aqi_index aqiImpact",children:"Current AQI (Status)"}),Object(O.jsx)("th",{children:"Last Updated"})]})}),Object(O.jsx)("tbody",{children:e.citiesAqi.map((function(a,c){return Object(O.jsxs)("tr",{className:t(a.aqi).className,onClick:function(){return e.showCityData(a.city)},children:[Object(O.jsx)("td",{className:"city",children:a.city}),Object(O.jsxs)("td",{className:"aqi_index aqiImpact",children:[a.aqi.toFixed(2)," (",t(a.aqi).impact,")"]}),Object(O.jsx)("td",{children:m()(a.updated).fromNow()})]},c)}))}),Object(O.jsxs)("tfoot",{children:[Object(O.jsx)("tr",{children:Object(O.jsx)("td",{colSpan:3,className:"aqi_index aqiImpact ",children:"Colors Indicator Below"})}),Object(O.jsx)("tr",{children:Object(O.jsx)("td",{colSpan:3,className:"aqi_index aqiImpact "+t(50).className,children:"AQI between 0 to 50 : Good"})}),Object(O.jsx)("tr",{children:Object(O.jsx)("td",{colSpan:3,className:"aqi_index aqiImpact "+t(100).className,children:"AQI between 50+ to 100 : Moderate"})}),Object(O.jsx)("tr",{children:Object(O.jsx)("td",{colSpan:3,className:"aqi_index aqiImpact "+t(150).className,children:"AQI between 100+ to 150 : Unhealthy for Sensitive Groups"})}),Object(O.jsx)("tr",{children:Object(O.jsx)("td",{colSpan:3,className:"aqi_index aqiImpact "+t(200).className,children:"AQI between 150+ to 200 : Unhealthy"})}),Object(O.jsx)("tr",{children:Object(O.jsx)("td",{colSpan:3,className:"aqi_index aqiImpact "+t(300).className,children:"AQI between 200+ to 300 : Very Unhealthy"})}),Object(O.jsx)("tr",{children:Object(O.jsx)("td",{colSpan:3,className:"aqi_index aqiImpact "+t(350).className,children:"AQI greater than 300 : Hazardous"})}),Object(O.jsx)("tr",{children:Object(O.jsx)("td",{colSpan:3,className:"aqi_index aqiImpact "+t("").className,children:"AQI data not available : Unknown"})})]})]}),e.selectedCity?Object(O.jsx)(p,{selectedCityData:e.selectedCityData,clearCityData:e.clearCityData,selectedCity:e.selectedCity}):null]})},f=(a(182),function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(e){var c;return Object(r.a)(this,a),(c=t.call(this,e)).componentDidMount=function(){c.connect()},c.connect=function(){var e,t=new WebSocket("wss://city-ws.herokuapp.com/"),a=Object(d.a)(c);t.onopen=function(){c.setState({ws:t}),a.timeout=250,clearTimeout(e)},t.onmessage=function(e){var t=JSON.parse(e.data);c.handleDataChange(t)},t.onclose=function(t){a.timeout=a.timeout+a.timeout,e=setTimeout(c.check,Math.min(1e4,a.timeout))},t.onerror=function(e){console.error("Socket encountered error: ",e.message,"Closing socket"),t.close()}},c.check=function(){var e=c.state.ws;e&&e.readyState!==WebSocket.CLOSED||c.connect()},c.handleDataChange=function(e){var t=c.state,a=t.citiesAqi,i=t.historicalCitiesAqi;e.forEach((function(e){var t=e.city,c=e.aqi,n=u.findIndex(a,{city:t});n>-1?a[n].updated=new Date:a.push({city:t,aqi:c,updated:new Date});var s=u.findIndex(i,t);s>-1?(i[s][t].length>9&&i[s][t].pop(),i[s][t].unshift({aqi:c,updated:new Date})):i.push(Object(l.a)({},t,[{aqi:c,updated:new Date}]))})),c.setState({citiesAqi:a,historicalCitiesAqi:i})},c.showCityData=function(e){var t=c.state.historicalCitiesAqi,a=u.findIndex(t,e);a>-1&&c.setState({selectedCity:e,selectedCityData:t[a][e]})},c.clearCityData=function(){c.setState({selectedCity:null,selectedCityData:null})},c.state={ws:null,citiesAqi:[],selectedCity:null,historicalCitiesAqi:[],selectedCityData:null},c}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.citiesAqi,a=e.selectedCity,c=e.selectedCityData;return Object(O.jsxs)("div",{className:"App",id:"content",children:[Object(O.jsx)("h1",{children:"Air Quality Monitoring"}),t.length>0?Object(O.jsx)(C,{citiesAqi:t,selectedCity:a,selectedCityData:c,showCityData:this.showCityData,clearCityData:this.clearCityData}):Object(O.jsx)("div",{className:"header",children:Object(O.jsx)("h1",{children:" No Result Found"})})]})}}]),a}(c.Component)),q=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,184)).then((function(t){var a=t.getCLS,c=t.getFID,i=t.getFCP,n=t.getLCP,s=t.getTTFB;a(e),c(e),i(e),n(e),s(e)}))};s.a.render(Object(O.jsx)(i.a.StrictMode,{children:Object(O.jsx)(f,{})}),document.getElementById("root")),q()},75:function(e,t,a){}},[[183,1,2]]]);
//# sourceMappingURL=main.2a94f58d.chunk.js.map